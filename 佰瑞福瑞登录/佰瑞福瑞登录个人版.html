<!DOCTYPE html>
<!-- saved from url=(0030)https://www.aiduigui.com/login -->
<html lang="en" xmlns:layout="https://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorate="common/layout"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>佰瑞福瑞登录</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="https://www.aiduigui.com/images/icons/favicon.ico">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/icon-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/animate.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/select2.min.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/daterangepicker.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/util.css">
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/main.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="佰瑞福瑞登录个人版_files/element.css">
<!--===============================================================================================-->
	<style>
		[v-cloak] {
			display: none;
		}
	</style>
</head>
<body>
	
	<div id="app" class="limiter"><div class="container-login100" style="background-image: url(&quot;../../尝试1/佰瑞福瑞登录/image/bg-01.jpg&quot;);"><div class="wrap-login100 p-l-110 p-r-110 p-t-62 p-b-33"><form class="login100-form validate-form flex-sb flex-w"><span class="login100-form-title p-b-53">
						欢迎回来！
					</span> <a href="佰瑞福瑞登录/佰瑞福瑞登录.htm" class="btn-face">
						账号登录
					</a> <a class="btn-face current">
						手机号登录
					</a> <!----> <!----> <!----> <!----> <!----> <!----> <div class="p-t-31 p-b-9"><span class="txt1">
							手机号
						</span></div> <div class="wrap-input100 validate-input" data-validate="请填入手机号！"><input type="text" name="username" class="input100"> <span class="focus-input100"></span></div> <div class="p-t-13 p-b-9"><span class="txt1">
							验证码
						</span></div> <div class="wrap-input100 validate-input" data-validate="请填入验证码！"><input type="text" name="password" placeholder="请输入验证码" class="pass-text-input pass-text-input-smsVerifyCode"> <span class="pass-clearbtn pass-clearbtn-smsVerifyCode" style="display: none; visibility: hidden;"></span> <button type="button" class="pass-item-timer-val">获取验证码</button> <span class="focus-input100"></span></div> <div class="m-t-20 m-b-6 txt2"><input type="checkbox"> <span>
               				 我已阅读并同意 <span style="color: rgb(98, 139, 235); cursor: pointer;">「隐私政策」</span>和<span id="note2" style="color: rgb(98, 139, 235); cursor: pointer;">「用户协议」</span></span></div> <div class="container-login100-form-btn m-t-17"><button type="button" class="login100-form-btn">
							登录
						</button></div> <div class="w-full text-center p-t-55"><span class="txt2">
							没有账号?
						</span> <a href="../佰瑞福瑞注册/佰瑞福瑞.html" class="txt2 bo1" style="cursor: pointer;">
							立即注册
						</a></div></form></div></div></div>
	

	<!--<div id="dropDownSelect1"></div>-->
	
<!--===============================================================================================-->
	<script src="佰瑞福瑞登录个人版_files/jquery-3.2.1.min.js.下载"></script>
<!--===============================================================================================-->
	<script src="佰瑞福瑞登录个人版_files/animsition.min.js.下载"></script>
<!--===============================================================================================-->
	<script src="佰瑞福瑞登录个人版_files/popper.js.下载"></script>
	<script src="佰瑞福瑞登录个人版_files/bootstrap.min.js.下载"></script>
<!--===============================================================================================-->
	<script src="佰瑞福瑞登录个人版_files/select2.min.js.下载"></script>
<!--===============================================================================================-->
	<script src="佰瑞福瑞登录个人版_files/moment.min.js.下载"></script>
	<script src="佰瑞福瑞登录个人版_files/daterangepicker.js.下载"></script>
<!--===============================================================================================-->
	<script src="佰瑞福瑞登录个人版_files/countdowntime.js.下载"></script>
<!--===============================================================================================-->
	<script src="佰瑞福瑞登录个人版_files/main.js.下载"></script>

	<script src="佰瑞福瑞登录个人版_files/encAndDecUrl.js.下载"></script>
	<script src="佰瑞福瑞登录个人版_files/vue.js.下载" type="text/javascript" charset="utf-8"></script>
	<script src="佰瑞福瑞登录个人版_files/element.js.下载"></script>
	<script src="佰瑞福瑞登录个人版_files/axios.min.js.下载"></script>


<script>
	new Vue({
		el: '#app',
		data() {
			return {
				// 目前的选择类型
				currentType: 'account',
				account: {
					studioName: '',
					userName: '',
					password: '',
				},
				phone: {
					phoneNumber: '',
					validateCode: ''
				},
				userPolicy: true,
				verShow: false,
				timer: 60,
				content: '获取验证码',
				correct: true, //前置条件判断
			}
		},
		created() {
			this.parsePromotedUrl()
		},
		methods: {
			login() {
				if (!this.userPolicy) {
					this.$message.warning("请勾选隐私政策与用户协议！")
					return false
				}
				//账号登录
				if (this.currentType === 'account') {
					let data = new FormData()
					data.append("studioName", this.account.studioName)
					data.append("userName", this.account.userName)
					data.append("password", this.account.password)
					//验证信息完整性
					if (this.account.studioName !== '' && this.account.password !== '' && this.account.userName !== '') {
						axios.post("/login", data).then(res => {
							// console.log(res)
							// debugger;
							if (res.data.resultCode === '0') {
								window.location.href='user/user.html' + "?" + localStorage.getItem("urlInfo");
								localStorage.setItem("loginFlag","1");
							}
						}).catch(res => {
							if (res.response.data.resultCode === '-1') {
								if (res.response.data.resultMesg === "账号或密码错误！") {
									this.$confirm(res.response.data.resultMesg, '提醒', {
										confirmButtonText: '确定',
										cancelButtonText: '取消',
									}).catch({})
									// this.$message.error(res.response.data.resultMesg)
								} else if(res.response.data.resultMesg === null) {
									this.$confirm("工作室或用户没有注册！", '提醒', {
										confirmButtonText: '确定',
										cancelButtonText: '取消',
									}).catch({})
									// this.$message.error("工作室或用户没有注册！")
								} else{
									this.$confirm(res.response.data.resultMesg, '提醒', {
										confirmButtonText: '确定',
										cancelButtonText: '取消',
									}).then( () => {
										window.location.href='https://top.aiduigui.com/';
									}).catch( ()=> {
									});
								}
							}
						})
					} else {
						if (this.account.studioName === '') {
							this.$message.warning("请填入工作室名称！")
							return
						}
						if (this.account.userName === '') {
							this.$message.warning("请填入用户名称！")
							return
						}
						if (this.account.password === '') {
							this.$message.warning("请输入账号密码！")
							return
						}

					}

				}

				// 短信验证码登录
				if (this.currentType === 'phone') {
					if (this.phone.phoneNumber !== '' && this.phone.validateCode !== '' && this.userPolicy) {
						let data = new FormData()
						data.append("phone", this.phone.phoneNumber)
						data.append("captcha", this.phone.validateCode)
						axios.post("/sms/login",data).then(res => {
							if (res.data.resultCode === "0") {
								window.location.href='user/user.html' + "?" + localStorage.getItem("urlInfo");
								localStorage.setItem("loginFlag","1");
							} else {
								this.$message.error("验证码不正确")
							}
						})
					} else {
						if (this.phone.phoneNumber === '') {
							this.$message.warning("请填入手机号！")
							return
						}
						if (this.phone.validateCode === '') {
							this.$message.warning("请输入验证码！")
							return
						}
					}

				}
			},
			async sendValidateCode() {
				let valid = true
				valid = this.validatePhone()
				// debugger
				if (!valid) {
					return
				}
				axios.get('/validate/phone/' + this.phone.phoneNumber).then(res => {
					if (res.data.resultCode !== '0') {
						this.$message.error("当前手机号未注册，请您注册使用！")
						return
					} else {
						if (this.correct && valid) {
							axios.get("/sms/login/" + this.phone.phoneNumber).then(res => {
								if (res.data.resultCode === "0") {
									this.$message.success(res.data.resultMesg)
									this.verShow = true;
									let auth_timer = setInterval(async ()=>{
										this.timer--;
										this.content = this.timer-- + 's后重新发送';
										if(this.timer<=0) {
											clearInterval(auth_timer)
											this.content = '重新发送验证码'
											this.timer = 60
											this.verShow = false;
										}
									},1000)
								}
							})
						}
					}
				})
			},
			jumpTo(val) {
				if (val === '1') {
					window.location.href = "yinsezhengce.html"
				}
				if (val === '2') {
					window.location.href = "userxieyi.html"
				}
				if (val === '3') {
					window.location.href = "/register"
				}
			},
			parsePromotedUrl() {
				let searchStr = decodeURI(location.search).slice(1);
				localStorage.setItem("urlInfo", searchStr)
			},
			validatePhone() {
				if (!/^((1[3,5,8,7,9][0-9])|(14[5,7])|(17[0,6,7,8])|(16[2,5,6,7,9])|(19[1,7]))\d{8}$/.test(this.phone.phoneNumber)) {
					this.$message.error("手机号格式不正确")
					this.correct = false
					return false
				} else {
					return true
				}
			},
		}
	})
</script>
<style>

</style>
</body></html>